<!DOCTYPE html>
<html>

<head>
    <title>Simple Dino Game</title>
    <link rel="stylesheet" href="assest/css/style.css">
</head>

<body>
    <h1>Score: <span id="score">0</span></h1>
    <h2>High Score: <span id="highScore">0</span></h2>
    <p>Click or tap to jump!</p>
    <div id="game">
        <div id="dino"></div>
        <div id="cactus"></div>
    </div>
    <button id="restartBtn" onclick="startGame()">Start</button>
    <script>
        const dino = document.getElementById("dino");
        const cactus = document.getElementById("cactus");
        const scoreElement = document.getElementById("score");
        const highScoreElement = document.getElementById("highScore");
        const restartBtn = document.getElementById("restartBtn");

        let score = 0;
        let cactusPosition = 600;
        let gameInterval = null;
        let isGameRunning = false;
        let speed = 5;
        const baseSpeed = 5;


        // Load high score
        let highScore = localStorage.getItem("dinoHighScore");
        highScore = highScore ? parseInt(highScore) : 0;
        highScoreElement.textContent = highScore;

        cactus.style.left = cactusPosition + "px";

        function jump() {
            if (!isGameRunning) return;
            if (!dino.classList.contains("jump")) {
                dino.classList.add("jump");
                setTimeout(() => dino.classList.remove("jump"), 500);
            }
        }

        document.addEventListener("keydown", (e) => {
            if (e.code === "Space") {
                if (!isGameRunning) {
                    startGame();
                } else {
                    jump();
                }
                e.preventDefault();
            }
        });

        document.addEventListener("click", jump);

        function startGame() {
            if (isGameRunning) return;

            isGameRunning = true;
            restartBtn.disabled = true;
            score = 0;
            speed = baseSpeed;
            scoreElement.textContent = 0;
            cactusPosition = 600;
            cactus.style.left = cactusPosition + "px";

            gameInterval = setInterval(gameLoop, 20);
        }


        function gameLoop() {
            const dinoBottom = parseInt(getComputedStyle(dino).getPropertyValue("bottom"));
            const cactusLeft = parseInt(getComputedStyle(cactus).getPropertyValue("left"));

            cactusPosition -= speed;
            if (cactusPosition < -30) cactusPosition = 600;
            cactus.style.left = cactusPosition + "px";

            if (cactusLeft < 85 && cactusLeft > 45 && dinoBottom < 45) {
                endGame();
            } else {
                score += 0.01;
                scoreElement.textContent = Math.floor(score);

                if (score >= 20 && speed < 12) {
                    speed += 0.01;
                }
            }
        }


        function endGame() {
            clearInterval(gameInterval);
            isGameRunning = false;
            restartBtn.disabled = false;

            const finalScore = Math.floor(score);

            if (finalScore > highScore) {
                highScore = finalScore;
                localStorage.setItem("dinoHighScore", highScore);
                highScoreElement.textContent = highScore;
            }

            alert("Game Over! Score: " + finalScore);
        }

        function restartGame() {
            startGame();
        }
    </script>

</body>

</html>